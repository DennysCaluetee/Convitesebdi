<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ebdi Group</title>
    <link rel="stylesheet" href="Style.css">
</head>
<body>

    <!-- Tela 1 (Metas) -->
    <div id="tela1">
        <h1 class="title">MetasðŸš€</h1>
        <div class="container" id="container1">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 2 (implementaÃ§Ã£o DOCUSIGN 10/04) -->
    <div id="tela2" style="display: none;">
        <h1 class="title">People Connect - DOCUSIGN 10/04</h1>
        <div class="container" id="container2">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 3 (ImplementaÃ§Ã£o SAP CONCUR) -->
    <div id="tela3" style="display: none;">
        <h1 class="title">People Connect - SAP CONCUR 18.03</h1>
        <div class="container" id="container3">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 4 (ImplementaÃ§Ã£o Penso 19.03) -->
    <div id="tela4" style="display: none;">
        <h1 class="title">People Connect - Penso 19.03</h1>
        <div class="container" id="container4">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 5 (ImplementaÃ§Ã£o AWS CAMPINAS 19.03) -->
    <div id="tela5" style="display: none;">
        <h1 class="title">People Connect - AWS CAMPINAS 19.03</h1>
        <div class="container" id="container5">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 6 (ImplementaÃ§Ã£o SAFETEC BH 20.03) -->
    <div id="tela6" style="display: none;">
        <h1 class="title">People Connect - SAFETEC BH 20.03</h1>
        <div class="container" id="container6">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 7 (ImplementaÃ§Ã£o ELSA 26.03) -->
    <div id="tela7" style="display: none;">
        <h1 class="title">People Connect - ELSA 26.03</h1>
        <div class="container" id="container7">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 8 (ImplementaÃ§Ã£o AWS RJ 26.03) -->
    <div id="tela8" style="display: none;">
        <h1 class="title">People Connect - AWS RJ 26.03</h1>
        <div class="container" id="container8">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 9 (ImplementaÃ§Ã£o GEP 26.03) -->
    <div id="tela9" style="display: none;">
        <h1 class="title">People Connect - GEP 26.03</h1>
        <div class="container" id="container9">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 10 (ImplementaÃ§Ã£o Darede 27.03) -->
    <div id="tela10" style="display: none;">
        <h1 class="title">People Connect - Darede 27.03</h1>
        <div class="container" id="container10">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 11 (ImplementaÃ§Ã£o DELAWARE 2025) -->
    <div id="tela11" style="display: none;">
        <h1 class="title">Profile Match - DELAWARE 2025</h1>
        <div class="container" id="container11">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 12 (ImplementaÃ§Ã£o Outsystems 16.04) -->
    <div id="tela12" style="display: none;">
        <h1 class="title">People Connect - Outsystems 16.04</h1>
        <div class="container" id="container12">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 13 (ImplementaÃ§Ã£o Snowflake 23.04) -->
    <div id="tela13" style="display: none;">
        <h1 class="title">People Connect - Snowflake 23.04</h1>
        <div class="container" id="container13">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <!-- Tela 14 (ImplementaÃ§Ã£o PROVENIR 24/04) -->
    <div id="tela14" style="display: none;">
        <h1 class="title">People Connect - PROVENIR 24/04</h1>
        <div class="container" id="container14">
            <p>Carregando dados...ðŸš€</p>
        </div>
    </div>

    <script>
        const urls = [
            "https://script.google.com/macros/s/AKfycbyVlKGZydz7K1rQc3KgTvIlK-YHJyp2baML927Cul0Y3NzoJNGFEobCZqvYxdtKF2mz/exec", 
            "https://script.google.com/macros/s/AKfycbywA6YEvDO8no50zTuwkiwP1sTKYC4hYw91ptAiQK5LDtqc3iSsj28fR5NLtxphDz45/exec",
            "https://script.google.com/macros/s/AKfycbzAuWk7risCAf8HTx3INK1CUtol43kAoSHCeWPILbZhUGZUga9falkENVlRFzc5hGaB/exec",
            "https://script.google.com/macros/s/AKfycbxCAzkjNIzf9S8lvhxnWw35d1PRBu9ydk4Me8YHvvaGcW46e1ciDSyQXSpBs66HKMHk/exec",
            "https://script.google.com/macros/s/AKfycbzv5jzWIPa6_ERXCuwOrBDR-GDnAxTsm1oHZbskWwjn04y8OORnpe2stp-MhjEs63_P/exec",
            "https://script.google.com/macros/s/AKfycbxBT46dRt1Q-qosr7t38B89VfWx41qPelrQ7oiKdo209wNYxq37zutAsohiUzQq53hX/exec",
            "https://script.google.com/macros/s/AKfycbx2qV1HH-utAe7-PRzj3k-2PUbW5T1I6OLSfn1Yms6VF2ihqr_KnnobNJSm4h7CNJjf/exec",
            "https://script.google.com/macros/s/AKfycbyKyrFmCUsVsSri4X5dx8G8l4XgMG8unmEJFTVeliHMkOj4aIqTFWsDZma_OU75J6Sx/exec",
            "https://script.google.com/macros/s/AKfycbywMGhm6uwaHiS5W7bo9r7hpwPskQFlokbW-k7x1eqYk_Z1tp2STuWWvsnt5NTRZcuI/exec",
            "https://script.google.com/macros/s/AKfycbwaPtnPA4eTJ0cDPGonNEuPo9xw3iHMUGIjtPyDcH0bkfqeuVX1eZuyEKyIJ1sHStYn/exec",
            "https://script.google.com/macros/s/AKfycbxqMCghB0oE-lq6tK7-etXyTJIZ3BP1UNetiKCDzZc4yUC1JKG4TIxBscw4liMhjjOr/exec",
            "https://script.google.com/macros/s/AKfycbySuGUWLlQRfj4It6pOH131450jEYu_o8Dbo4lJYv41Pzll46ZiGmA2_M8AviiFPUqM/exec",
            "https://script.google.com/macros/s/AKfycbwjsUGY2h_oc05Ah59HttU_zAorVA_FuqfTvPy849gajmznLNqL7_yDdZQ54TtbTpgg/exec",
            "https://script.google.com/macros/s/AKfycbxsvc7zoEMkjMVOdKQH06Fqr5sVyRkB6WOAd_SVSkLJok43qceoorGzQM6JbyCRwyOF/exec",
        ];

        const telas = ["tela1", "tela2", "tela3", "tela4", "tela5", "tela6", "tela7", "tela8", "tela9", "tela10", "tela11", "tela12", "tela13", "tela14"];

        async function carregarDados() {
            try {
                const dados = await Promise.all(urls.map(url => fetch(url).then(res => res.json())));
                exibirDados(dados);
            } catch (error) {
                console.error("Erro ao carregar os dados: ", error);
            }
        }

        function exibirDados(dados) {
            telas.forEach((tela, index) => {
                const container = document.getElementById(`container${index + 1}`);
                const data = dados[index];
                container.innerHTML = "";

                if (!Array.isArray(data) || data.length === 0) {
                    container.innerHTML = "<p>Nenhum dado encontrado.</p>";
                    return;
                }

                data.sort((a, b) => {
                    const percentualA = parseInt(a.meta) > 0 ? Math.round((parseInt(a.alcancado) / parseInt(a.meta)) * 100) : 100;
                    const percentualB = parseInt(b.meta) > 0 ? Math.round((parseInt(b.alcancado) / parseInt(b.meta)) * 100) : 100;
                    return percentualB - percentualA;
                });

                const slaIndex = data.findIndex(item => item.nome && item.nome.toLowerCase() === 'sla');
                if (slaIndex !== -1) {
                    const slaCard = data.splice(slaIndex, 1)[0];
                    data.unshift(slaCard);
                }

                data.forEach((item, i) => {
                    const nome = item.nome || `P${i + 1}`;
                    const meta = parseInt(item.meta) || 0;
                    const alcancado = parseInt(item.alcancado) || 0;
                    let percentual = meta > 0 ? Math.round((alcancado / meta) * 100) : 100;
                    const percentualExibido = percentual;
                    percentual = percentual > 100 ? 100 : percentual;
                    const corBarra = percentualExibido < 50 ? "#dc3545" : percentualExibido < 100 ? "#ffc107" : "#28a745";
                
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <div class="card-body">
                            <h3 style="text-align: center;">${nome}</h3>
                            <p style="text-align: center;">Meta: <span>${meta}</span></p>
                            <p style="text-align: center;">AlcanÃ§ado: <span>${alcancado}</span></p>
                            <div class="progress" style="background-color: white; border-radius: 10px; border: 1px solid #ccc; box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1);">
                                <div class="progress-bar" style="width: ${percentual}%; background: ${corBarra}; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                                    <span style="color: #000; font-weight: bold;">${percentualExibido}%</span>
                                </div>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
            });
        }

        let indiceTela = 0;
        function mudarTela() {
            telas.forEach(tela => document.getElementById(tela).style.display = 'none');
            document.getElementById(telas[indiceTela]).style.display = 'block';
            indiceTela = (indiceTela + 1) % telas.length;
        }

        window.onload = () => {
            carregarDados();
            setInterval(carregarDados, 2000);
            mudarTela();
            setInterval(mudarTela, 18000);
        };
    </script>
</body>
</html>
